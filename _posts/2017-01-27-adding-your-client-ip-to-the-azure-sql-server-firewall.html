---
title: Adding your Client IP to the Azure SQL server firewall
type: post
tags:
- Azure
- IP
- SQL
date: 2017-01-27 17:11:48.000000000 +01:00
permalink: /2017/01/adding-your-client-ip-to-the-azure-sql-server-firewall/
categories:
- Azure
status: publish
---
<p>One of the first things that need to be done when you create a Azure SQL database is adding the Client IP address to the firewall of the Azure SQL server. By default all traffic between Azure services are allowed but traffic from another machine is disallowed. Connecting to the server with for example SQL Management Studio will result in the following error:</p>
<p>&nbsp;</p>
<p>“<em>Cannot open server [servername] requested by the login. Client with IP address [IP Address] is not allowed to access the server.</em>”</p>
<p>&nbsp;</p>
<p><a href="/assets/archive/2017/01/image-4.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" src="/assets/archive/2017/01/image_thumb-4.png" alt="image" width="953" height="381" border="0" /></a></p>
<h2>Steps</h2>
<p>When you open the Azure SQL Database within Visual Studio it will prompt you the question if you would like to add your Client IP to the firewall in order to access the database.  If you prefer another tool like SQL Server Management studio you will have to configure this within the Azure Portal (as mentioned in the error):</p>
<ol>
<li>Open the Azure Portal: <a href="https://portal.azure.com">https://portal.azure.com</a>.</li>
<li>Click on Resource Groups and then the resource group of the SQL server.</li>
<li>In the Resource Group blade click on the SQL server.</li>
<li>Within the “Security” Category click on “Firewall”.</li>
<li>Add your Client IP within this blade.</li>
<li>Click on save to save the settings.</li>
</ol>
<p>&nbsp;</p>
<p><a href="/assets/archive/2017/01/image-5.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="Azure SQL Firewall" src="/assets/archive/2017/01/image_thumb-5.png" alt="Azure SQL Firewall" width="725" height="644" border="0" /></a></p>
<p>&nbsp;</p>
<p>Until today I navigated to the website: <a title="https://www.whatismyip.com/" href="https://www.whatismyip.com/">https://www.whatismyip.com/</a> to retrieve my external IP and add it via the steps mentioned above but today I noticed another option (I think it already was there for quite some time). Within the firewall blade you can click on “Add client IP” to add your current client IP.</p>
<p>&nbsp;</p>
<p><a href="/assets/archive/2017/01/image-6.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="Add Client IP" src="/assets/archive/2017/01/image_thumb-6.png" alt="Add Client IP" width="1577" height="131" border="0" /></a></p>
