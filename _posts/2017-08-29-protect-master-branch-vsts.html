---
layout: post
title: Protect your master Branch in VSTS
date: 2017-08-29 22:04:35.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Azure DevOps
tags:
- Configuration
- Security
- VSTS
meta:
  yuzo_related_post_metabox: a:1:{s:21:"yuzo_disabled_related";N;}
  _edit_last: '1'
  snap_isAutoPosted: '1'
  _yoast_wpseo_focuskw_text_input: VSTS
  _yoast_wpseo_focuskw: VSTS
  _yoast_wpseo_linkdex: '72'
  _yoast_wpseo_content_score: '90'
  _yoast_wpseo_primary_category: ''
  _snap_forceSURL: '1'
  snap_MYURL: ''
  snapEdIT: '1'
  snapFB: s:421:"a:1:{i:0;a:11:{s:2:"do";s:1:"1";s:9:"msgFormat";s:51:"New post (%TITLE%)
    has been published on %SITENAME%";s:8:"postType";s:1:"A";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:8:"isPosted";s:1:"1";s:4:"pgID";s:33:"1428116197465709_1944685145808809";s:7:"postURL";s:61:"http://www.facebook.com/msftplayground/posts/1944685145808809";s:5:"pDate";s:19:"2017-08-29
    21:04:55";}}";
  snapLI: s:441:"a:1:{i:0;a:11:{s:2:"do";s:1:"1";s:9:"msgFormat";s:41:"New post has
    been published on %SITENAME%";s:8:"postType";s:1:"A";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:8:"isPosted";s:1:"1";s:4:"pgID";s:19:"6308403905692733440";s:7:"postURL";s:104:"https://www.linkedin.com/updates?discuss=&scope=22692038&stype=M&topic=6308403905692733440&type=U&a=add-";s:5:"pDate";s:19:"2017-08-29
    21:04:55";}}";
  snapTW: s:379:"a:1:{i:0;a:11:{s:2:"do";s:1:"1";s:9:"msgFormat";s:25:"%TITLE% - %URL%
    - %HTAGS%";s:8:"attchImg";s:1:"0";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";s:8:"isPosted";s:1:"1";s:4:"pgID";s:18:"902638219438764032";s:7:"postURL";s:60:"https://twitter.com/maikvandergaag/status/902638219438764032";s:5:"pDate";s:19:"2017-08-29
    21:04:56";}}";
  _wpas_done_all: '1'
  _oembed_1ba82f062134c494a889e607d118caea: "{{unknown}}"
  medium_post: O:11:"Medium_Post":11:{s:16:"author_image_url";N;s:10:"author_url";N;s:11:"byline_name";N;s:12:"byline_email";N;s:10:"cross_link";N;s:2:"id";N;s:21:"follower_notification";N;s:7:"license";N;s:14:"publication_id";N;s:6:"status";N;s:3:"url";N;}
  _wds_opengraph: a:3:{s:5:"title";s:0:"";s:11:"description";s:0:"";s:6:"images";a:1:{i:0;s:0:"";}}
  _wds_twitter: a:3:{s:5:"title";s:0:"";s:11:"description";s:0:"";s:6:"images";a:1:{i:0;s:0:"";}}
  _wds_focus-keywords: VSTS
  _wds_title: ''
  _wds_metadesc: ''
  _wds_meta-robots-adv: ''
  _wds_meta-robots-nofollow: ''
  _wds_canonical: ''
author:
  login: maik@familie-vandergaag.nl
  email: maik@familie-vandergaag.nl
  display_name: Maik van der Gaag
  first_name: Maik
  last_name: van der Gaag
permalink: "/2017/08/protect-master-branch-vsts/"
---
<p>You can set up permissions and policies to control who can read and update code in a branch on your Git repo within VSTS. You can set permissions for individual users and groups, and inherit and override permissions as needed.</p>
<p>&nbsp;</p>
<p>Within regular projects you want to set up specific permissions and policies on your master branch. Only specific users should add code to your master branch. This is done by permissions and policies</p>
<p>&nbsp;</p>
<h2>Adjust security on your master branch</h2>
<p>To remove access to a branch we can remove the permissions for the developers. In default situations your developers will reside in the default “Contributors” group. First step is to remove the inheritance from the branch because branch security is set up with inheritance.</p>
<p>&nbsp;</p>
<ol>
<li>Go to your project within VSTS</li>
<li>Click on the settings icon and then Version Control</li>
<li>Select the branch you want to stop the inheritance of.</li>
<li>Click on inheritance and select “off”.</li>
</ol>
<p><a href="https://msftplayground.com/wp-content/uploads/2017/08/inheritance-off.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="inheritance off" src="{{ site.baseurl }}/assets/archive/2017/08/inheritance-off_thumb.png" alt="inheritance off" width="1124" height="539" border="0" /></a></p>
<ol start="5">
<li>With the inheritance off VSTS security groups can be removed from the branch.</li>
</ol>
<p><a href="https://msftplayground.com/wp-content/uploads/2017/08/remove-group.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="remove group from branch" src="{{ site.baseurl }}/assets/archive/2017/08/remove-group_thumb.png" alt="remove group from branch" width="1009" height="483" border="0" /></a></p>
<p>&nbsp;</p>
<h2>Branch Policy</h2>
<p>If the permissions are setup correctly on the branch a policy needs to be configured in the branch in order for developers to be able to push code to the master branch, and that approval is configured on the so-called pull request.</p>
<ol>
<li>Go to your project within VSTS</li>
<li>Click on the settings icon and then Version Control</li>
<li>Select the branch</li>
<li>Select “Branch Policies”</li>
</ol>
<p><a href="https://msftplayground.com/wp-content/uploads/2017/08/branch-policies.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title=" VSTS Branch Policies" src="{{ site.baseurl }}/assets/archive/2017/08/branch-policies_thumb.png" alt=" VSTS Branch Policies" width="1122" height="523" border="0" /></a></p>
<p>&nbsp;</p>
<ol start="5">
<li><!--EndFragment-->On the branch policy page setup the policy as you want, you should for example configure a required approver. I also love the feature of a linked work items that are required.</li>
</ol>
<p><a href="https://msftplayground.com/wp-content/uploads/2017/08/image-12.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="Branch Policy" src="{{ site.baseurl }}/assets/archive/2017/08/image_thumb-12.png" alt="Branch Policy" width="968" height="925" border="0" /></a></p>
